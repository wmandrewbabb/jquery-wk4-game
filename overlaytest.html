<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .action {
            display:inline-block;
            width: 70px;
            height: 70px;
            font-size: 45px;
            line-height: 70px;
            background: red;
            color: white;
            text-align: center;
            border-radius: 10px;
            position: relative;
            font-family: 'verdana';
            cursor: pointer;
            transition: all .3s linear;
            /* overflow:hidden;*/ /*enable this if you want the bounce in text not to clip to the parent object */
            margin:10px;
            z-index: 1;
        }

        .overlay {
            display:none;
            width:100%;
            height:100%;
            background:rgba(0,0,0,.6);
            border-radius: 10px;
            position:absolute;
            top:0;
            left:0;
            z-index:10;
            color:white;
        }

        .bounce-in-top {
            -webkit-animation: bounce-in-top 2.1s both;
            animation: bounce-in-top 2.1s both;
        }

        /* ----------------------------------------------
        * Generated by Animista on 2018-5-22 12:53:50
        * w: http://animista.net, t: @cssanimista
        * ---------------------------------------------- */

        /**
        * ----------------------------------------
        * animation bounce-in-top
        * ----------------------------------------
        */
            @-webkit-keyframes bounce-in-top {
            0% {
                -webkit-transform: translateY(-500px);
                        transform: translateY(-500px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
                opacity: 0;
            }
            38% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
                opacity: 1;
            }
            55% {
                -webkit-transform: translateY(-65px);
                        transform: translateY(-65px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
            }
            72% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            81% {
                -webkit-transform: translateY(-28px);
                        transform: translateY(-28px);
                -webkit-animation-timing-function: ease-in;
            }
            90% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            95% {
                -webkit-transform: translateY(-8px);
                        transform: translateY(-8px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
            }
            100% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            }
            @keyframes bounce-in-top {
            0% {
                -webkit-transform: translateY(-500px);
                        transform: translateY(-500px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
                opacity: 0;
            }
            38% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
                opacity: 1;
            }
            55% {
                -webkit-transform: translateY(-65px);
                        transform: translateY(-65px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
            }
            72% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            81% {
                -webkit-transform: translateY(-28px);
                        transform: translateY(-28px);
                -webkit-animation-timing-function: ease-in;
            }
            90% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            95% {
                -webkit-transform: translateY(-8px);
                        transform: translateY(-8px);
                -webkit-animation-timing-function: ease-in;
                        animation-timing-function: ease-in;
            }
            100% {
                -webkit-transform: translateY(0);
                        transform: translateY(0);
                -webkit-animation-timing-function: ease-out;
                        animation-timing-function: ease-out;
            }
            }

    </style>

<meta charset="UTF-8">
<title>JavaScript Content!</title>



</head>


<body>
<br>
<br>
<br>
<br>
<div class="action">A</div>
<div class="action">B</div>
<div class="action">C</div>

<!-- <div id="hoverme">
        Hover me
<img id="hoverme" src="book.png" alt="" width="100" height="123">
</div> -->

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    
    <script type="text/javascript">
        var dice = 23;

            function overl () {
                
                var overlayanimated = '<div class="overlay">' + dice + '</div>';
                $(this).append(overlayanimated);
                var ov = $(this).find('.overlay');
                ov.addClass("bounce-in-top");
                
                console.log(ov);
                ov.fadeIn();
                //timer(ov);
                
                window.clearTimeout(ov);
                
                
                ov.fadeOut(2000).delay(2000);
                $(this).delay(2000).remove(overlay);  
                    //ov.removeClass("bounce-in-top");  
                // setTimeout( function(){ 
                //         $(this).off('click',overl);
                // }  , 3000 );
                
                    
                
                $(this).off('click',overl);

                var myNode = document.getElementsByClassName("overlay bounce-in-top");
                while (myNode.firstChild) {
                    myNode.removeChild(myNode.firstChild);
                }
            }

            // function timer($el) {
            //     var sec = $el.text();
            //     var timer = setInterval(function() { 
            //         $el.text(--sec);
            //             if (sec == 0) {
            //                 $el.fadeOut('1000',function(){
            //                     $el.remove();
            //                     });
            //                 $el.parent().on('click',overl);
            //                 clearInterval(timer);
            //             } 
            //     }, 1000);
            // }

            $(".action").on('click',overl);

           // $("#hoverme").hover(function() { $( this ).find( "img" ).stop( true, true ).fadeOut();}, function() {$( this ).find( "img" ).stop( true, true ).fadeIn();});

//just rewrite all of this shit from scratch now that you know what .delay and , setinterval, setTimeout and .stop

//block for this should be:
//create div
//apply classes
//let classes run through transition animation
//either remove class or use active/hover/focus or use fadeout
//after an interval, remove that div

//possible reasons why this was broken
// 1- improper syntax ++++
// 2- improper order +++
// 3- something weird with the function (i.e. every instance of the spawned div used the same timer) +++
// 4- something weird with jquery that's going to be more obvious using just vanilla javascript for this

  </script>


</body>
</html>